query GetPool($id: String!) {
    pool: poolGetPool(id: $id) {
        id
        address
        name
        owner
        decimals
        factory
        symbol
        createTime
        dynamicData {
            poolId
            swapEnabled
            totalLiquidity
            totalShares
            fees24h
            swapFee
            volume24h
            apr {
                hasRewardApr
                thirdPartyApr
                nativeRewardApr
                swapApr
                total
                items {
                    title
                    apr
                    subItems {
                        title
                        apr
                    }
                }
            }
        }
        allTokens {
            id
            address
            name
            symbol
            decimals
            isNested
            isPhantomBpt
        }
        staking {
            id
            type
            address
            farm {
                id
                beetsPerBlock
                rewarders {
                    id
                    address
                    tokenAddress
                    rewardPerSecond
                }
            }
        }
        investConfig {
            singleAssetEnabled
            proportionalEnabled
            options {
                poolTokenIndex
                poolTokenAddress
                tokenOptions {
                    ... on GqlPoolToken {
                        ...GqlPoolToken
                    }
                }
            }
        }
        withdrawConfig {
            singleAssetEnabled
            proportionalEnabled
            options {
                poolTokenIndex
                poolTokenAddress
                tokenOptions {
                    ... on GqlPoolToken {
                        ...GqlPoolToken
                    }
                }
            }
        }
        ... on GqlPoolWeighted {
            nestingType
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
                ... on GqlPoolTokenLinear {
                    ...GqlPoolTokenLinear
                }
                ... on GqlPoolTokenPhantomStable {
                    ...GqlPoolTokenPhantomStable
                }
            }
        }
        ... on GqlPoolStable {
            amp
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
            }
        }
        ... on GqlPoolElement {
            unitSeconds
            principalToken
            baseToken
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
            }
        }
        ... on GqlPoolPhantomStable {
            amp
            nestingType
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
                ... on GqlPoolTokenLinear {
                    ...GqlPoolTokenLinear
                }
                ... on GqlPoolTokenPhantomStable {
                    ...GqlPoolTokenPhantomStable
                }
            }
        }
        ... on GqlPoolLinear {
            mainIndex
            wrappedIndex
            lowerTarget
            upperTarget
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
            }
        }
        ... on GqlPoolLiquidityBootstrapping {
            name
            nestingType
            tokens {
                ... on GqlPoolToken {
                    ...GqlPoolToken
                }
                ... on GqlPoolTokenLinear {
                    ...GqlPoolTokenLinear
                }
                ... on GqlPoolTokenPhantomStable {
                    ...GqlPoolTokenPhantomStable
                }
            }
        }
    }
}

fragment GqlPoolToken on GqlPoolToken {
    id
    index
    name
    symbol
    balance
    address
    priceRate
    decimals
    weight
}

fragment GqlPoolTokenLinear on GqlPoolTokenLinear {
    id
    index
    name
    symbol
    balance
    address
    priceRate
    decimals
    weight
    mainTokenBalance
    wrappedTokenBalance
    totalMainTokenBalance
    pool {
        id
        name
        symbol
        address
        owner
        factory
        createTime
        wrappedIndex
        mainIndex
        upperTarget
        lowerTarget
        totalShares
        totalLiquidity
        tokens {
            ... on GqlPoolToken {
                ...GqlPoolToken
            }
        }
    }
}

fragment GqlPoolTokenPhantomStable on GqlPoolTokenPhantomStable {
    id
    index
    name
    symbol
    balance
    address
    weight
    priceRate
    decimals
    pool {
        id
        name
        symbol
        address
        owner
        factory
        createTime
        totalShares
        totalLiquidity
        nestingType
        tokens {
            ... on GqlPoolToken {
                ...GqlPoolToken
            }
            ... on GqlPoolTokenLinear {
                ...GqlPoolTokenLinear
            }
        }
    }
}

query GetPoolSwaps($first: Int, $skip: Int, $where: GqlPoolSwapFilter) {
    swaps: poolGetSwaps(first: $first, skip: $skip, where: $where) {
        id
        poolId
        timestamp
        tokenAmountIn
        tokenAmountOut
        tokenIn
        tokenOut
        tx
        userAddress
        valueUSD
    }
}

query GetPoolJoinExits($first: Int, $skip: Int, $poolId: String!) {
    joinExits: poolGetJoinExits(first: $first, skip: $skip, where: { poolIdIn: [$poolId] }) {
        id
        timestamp
        tx
        type
        valueUSD
        amounts {
            address
            amount
        }
    }
}
